import{a as B,u as F,d as k,r as d,j as t,L as O,F as R,s as M,a6 as D,a9 as T,p as U}from"./index-DpfGS3Ht.js";import{T as V}from"./Table-FvLzyYkS.js";import{S as A}from"./SearchInput-CP9JsF7u.js";import{L as $}from"./LeadStatusBadge-uRWzzBTQ.js";import{L as G}from"./LeadDetailModal-Dveq0y_6.js";import{E as H}from"./eye-B8aLYjqH.js";import{C as J}from"./calendar-6our05Fb.js";import{M as K}from"./mail-C_Wl97J7.js";import"./Modal-9Na5SDL_.js";import"./trending-up-9sMzrTP7.js";import"./dollar-sign-BE4S_9FW.js";import"./phone-call-u8pH4PaT.js";import"./circle-check-big-BLLBtyX0.js";import"./save-BcRJrSrN.js";const je=()=>{const e=B.c(33),s=F(),{leads:x,loading:S,pagination:i}=k(W),[n,I]=d.useState(""),[a,q]=d.useState(1),[L,z]=d.useState(null),[C,E]=d.useState(!1);let u,p;e[0]!==a||e[1]!==s||e[2]!==n?(u=()=>{const r={status:"quoted",page:a,limit:20};n&&(r.search=n),s(D(r))},p=[s,n,a],e[0]=a,e[1]=s,e[2]=n,e[3]=u,e[4]=p):(u=e[3],p=e[4]),d.useEffect(u,p);let h;e[5]!==s?(h=r=>{z(r),s(T(r)),E(!0)},e[5]=s,e[6]=h):h=e[6];const P=h,Q=X;let f,g,j,y;e[7]===Symbol.for("react.memo_cache_sentinel")?(f={header:"Buyer",render:Y},g={header:"Contact",render:Z},j={header:"Product",render:ee},y={header:"Quoted Price (â‚¹)",render:te},e[7]=f,e[8]=g,e[9]=j,e[10]=y):(f=e[7],g=e[8],j=e[9],y=e[10]);let N;e[11]===Symbol.for("react.memo_cache_sentinel")?(N=[f,g,j,y,{header:"Follow-up",render:r=>t.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-700",children:[t.jsx(J,{size:12}),t.jsx("span",{children:Q(r.followUpDate)})]})},{header:"Status",render:se}],e[11]=N):N=e[11];const _=N;let b;e[12]===Symbol.for("react.memo_cache_sentinel")?(b=t.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Quote Management"}),t.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"View and manage all leads where a quote has been sent."})]})}),e[12]=b):b=e[12];let l;e[13]!==n?(l=t.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200",children:t.jsx("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:t.jsx("div",{className:"flex-1 w-full",children:t.jsx(A,{value:n,onChange:I,placeholder:"Search by buyer name, email, phone, or product..."})})})}),e[13]=n,e[14]=l):l=e[14];let c;e[15]!==a||e[16]!==P||e[17]!==x||e[18]!==S||e[19]!==i?(c=t.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:S?t.jsx(O,{}):x.length===0?t.jsxs("div",{className:"p-12 text-center",children:[t.jsx(R,{className:"mx-auto text-gray-400 mb-4",size:48}),t.jsx("p",{className:"text-gray-600",children:"No quoted leads found"})]}):t.jsxs(t.Fragment,{children:[t.jsx(V,{columns:_,data:x,actions:r=>t.jsx(M,{variant:"primary",size:"small",onClick:()=>P(r),children:t.jsx(H,{size:16})})}),i?.pages>1&&t.jsxs("div",{className:"p-4 border-t border-gray-200 flex items-center justify-between text-sm text-gray-600",children:[t.jsxs("span",{children:["Page ",i.page," of ",i.pages]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(M,{variant:"outline",size:"small",disabled:a===1,onClick:()=>q(ae),children:"Previous"}),t.jsx(M,{variant:"outline",size:"small",disabled:a===i.pages,onClick:()=>q(r=>Math.min(i.pages,r+1)),children:"Next"})]})]})]})}),e[15]=a,e[16]=P,e[17]=x,e[18]=S,e[19]=i,e[20]=c):c=e[20];let v;e[21]===Symbol.for("react.memo_cache_sentinel")?(v=()=>{E(!1),z(null)},e[21]=v):v=e[21];let o;e[22]!==a||e[23]!==s?(o=()=>{s(D({status:"quoted",page:a,limit:20}))},e[22]=a,e[23]=s,e[24]=o):o=e[24];let m;e[25]!==C||e[26]!==L||e[27]!==o?(m=t.jsx(G,{isOpen:C,onClose:v,lead:L,onUpdate:o}),e[25]=C,e[26]=L,e[27]=o,e[28]=m):m=e[28];let w;return e[29]!==c||e[30]!==m||e[31]!==l?(w=t.jsxs("div",{className:"space-y-6",children:[b,l,c,m]}),e[29]=c,e[30]=m,e[31]=l,e[32]=w):w=e[32],w};function W(e){return e.leads}function X(e){return e?new Date(e).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}):"N/A"}function Y(e){return t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold text-gray-900",children:e.buyerName}),e.companyName&&t.jsx("div",{className:"text-xs text-gray-600",children:e.companyName})]})}function Z(e){return t.jsxs("div",{className:"text-sm",children:[t.jsxs("div",{className:"flex items-center gap-1 text-gray-700",children:[t.jsx(U,{size:12}),t.jsx("span",{children:e.buyerPhone})]}),t.jsxs("div",{className:"flex items-center gap-1 text-gray-600 text-xs",children:[t.jsx(K,{size:12}),t.jsx("span",{className:"truncate max-w-[150px]",title:e.buyerEmail,children:e.buyerEmail})]})]})}function ee(e){return t.jsxs("div",{className:"flex items-center gap-2",children:[e.productId?.image&&t.jsx("img",{src:e.productId.image,alt:e.productName,className:"w-10 h-10 object-cover rounded"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-gray-900 truncate max-w-[200px]",title:e.productName,children:e.productName}),t.jsxs("div",{className:"text-xs text-gray-600",children:["Qty: ",e.quantityRequired]})]})]})}function te(e){return t.jsx("div",{className:"text-sm font-semibold text-gray-900",children:e.quotedPrice?e.quotedPrice.toLocaleString("en-IN"):"Not set"})}function se(e){return t.jsx($,{status:e.status})}function ae(e){return Math.max(1,e-1)}export{je as default};
