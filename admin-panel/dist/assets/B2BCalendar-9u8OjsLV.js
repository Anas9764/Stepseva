import{r as l,j as e,L as h,m as f,B as g,ad as j,af as u,ac as N}from"./index-DpfGS3Ht.js";import{C as n}from"./calendar-6our05Fb.js";const w=()=>{const[i,x]=l.useState([]),[m,c]=l.useState(!1);l.useEffect(()=>{(async()=>{try{c(!0);const s=await N.getAllLeads({limit:500}),t=s?.data||s;x(t?.leads||[])}catch(s){console.error("Error fetching leads for calendar:",s)}finally{c(!1)}})()},[]);const o=l.useMemo(()=>{const a={},s=new Date;return i.forEach(t=>{if(!t.followUpDate)return;const r=new Date(t.followUpDate),d=r.toISOString().split("T")[0];a[d]||(a[d]={date:r,items:[]});const y=r<s&&t.status!=="closed";a[d].items.push({...t,isOverdue:y})}),Object.values(a).sort((t,r)=>t.date-r.date)},[i]),p=a=>a.toLocaleDateString("en-IN",{weekday:"short",day:"numeric",month:"short",year:"numeric"});return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Follow-up Calendar"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"See upcoming and overdue B2B follow-ups based on lead follow-up dates."})]})}),m?e.jsx(h,{}):o.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-12 text-center",children:[e.jsx(n,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("p",{className:"text-gray-600",children:"No follow-up dates set yet. Use the Lead Detail modal to add follow-up dates for your leads."})]}):e.jsx("div",{className:"space-y-4",children:o.map(a=>e.jsxs(f.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-md border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{className:"text-primary",size:18}),e.jsx("p",{className:"font-semibold text-gray-800",children:p(a.date)})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[a.items.length," follow-up",a.items.length===1?"":"s"]})]}),e.jsx("div",{className:"divide-y divide-gray-100",children:a.items.map(s=>e.jsxs("div",{className:"px-4 py-3 flex items-start gap-3 hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"mt-1",children:e.jsx(g,{className:"text-primary",size:18})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:s.buyerName}),s.companyName&&e.jsx("p",{className:"text-xs text-gray-600",children:s.companyName}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[s.productName," â€¢ Qty ",s.quantityRequired]})]}),e.jsxs("div",{className:"text-xs text-right text-gray-600 space-y-1",children:[e.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-gray-100",children:[e.jsx(j,{size:12}),e.jsx("span",{className:"capitalize",children:s.status})]}),s.isOverdue&&e.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-red-50 text-red-700",children:[e.jsx(u,{size:12}),e.jsx("span",{children:"Overdue"})]})]})]}),s.followUpNotes&&e.jsxs("p",{className:"mt-2 text-xs text-gray-700",children:["Notes: ",s.followUpNotes]})]})]},s._id))})]},a.date.toISOString()))})]})};export{w as default};
