import{c as f,r as a,a5 as d,z as r,j as e,L as N,s as u,X as k}from"./index-DrVHF49k.js";import{T as w}from"./Table-CPTOpXxD.js";import{S}from"./SearchInput-DQh0A_yT.js";import{C as B}from"./circle-check-big-wk8a-cBc.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=f("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),P=()=>{const[o,m]=a.useState([]),[h,x]=a.useState(!1),[n,p]=a.useState(""),[c,g]=a.useState("");a.useEffect(()=>{i()},[n,c]);const i=async()=>{try{x(!0);const s={};n&&(s.search=n),c&&(s.status=c);const t=await d.get("/business-accounts",{params:s});m(t.data.data||[])}catch(s){console.error("Error fetching business accounts:",s),r.error("Failed to fetch business accounts")}finally{x(!1)}},y=async s=>{try{await d.put(`/business-accounts/${s}/approve`,{status:"active"}),r.success("Business account approved successfully!"),i()}catch{r.error("Failed to approve account")}},b=async s=>{try{await d.put(`/business-accounts/${s}/approve`,{status:"rejected"}),r.success("Business account rejected"),i()}catch{r.error("Failed to reject account")}},v=s=>{const t={pending:{bg:"bg-yellow-100",text:"text-yellow-700",label:"Pending"},active:{bg:"bg-green-100",text:"text-green-700",label:"Active"},suspended:{bg:"bg-red-100",text:"text-red-700",label:"Suspended"},inactive:{bg:"bg-gray-100",text:"text-gray-700",label:"Inactive"}},l=t[s]||t.pending;return e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold ${l.bg} ${l.text}`,children:l.label})},j=[{key:"companyName",label:"Company",render:s=>e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:s.companyName}),e.jsx("div",{className:"text-xs text-gray-600 capitalize",children:s.businessType})]})},{key:"contactPerson",label:"Contact Person",render:s=>e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.contactPerson?.name}),e.jsx("div",{className:"text-xs text-gray-600",children:s.contactPerson?.email}),e.jsx("div",{className:"text-xs text-gray-600",children:s.contactPerson?.phone})]})},{key:"pricingTier",label:"Pricing Tier",render:s=>e.jsx("span",{className:"text-sm font-semibold text-primary capitalize",children:s.pricingTier})},{key:"creditLimit",label:"Credit Limit",render:s=>e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:["₹",(s.creditLimit||0).toLocaleString("en-IN")]}),e.jsxs("div",{className:"text-xs text-gray-600",children:["Available: ₹",((s.creditLimit||0)-(s.creditUsed||0)).toLocaleString("en-IN")]})]})},{key:"paymentTerms",label:"Payment Terms",render:s=>e.jsx("span",{className:"text-sm text-gray-700 uppercase",children:s.paymentTerms})},{key:"status",label:"Status",render:s=>v(s.status)},{key:"actions",label:"Actions",render:s=>e.jsx("div",{className:"flex items-center gap-2",children:s.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(u,{variant:"success",size:"small",onClick:()=>y(s._id),children:e.jsx(B,{size:16})}),e.jsx(u,{variant:"danger",size:"small",onClick:()=>b(s._id),children:e.jsx(k,{size:16})})]})})}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Business Accounts"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage B2B business accounts and approvals"})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(S,{value:n,onChange:p,placeholder:"Search by company name, contact person..."})}),e.jsx("div",{className:"w-full md:w-48",children:e.jsxs("select",{value:c,onChange:s=>g(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"suspended",children:"Suspended"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:h?e.jsx(N,{}):o.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(z,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("p",{className:"text-gray-600",children:"No business accounts found"})]}):e.jsx(w,{columns:j,data:o})})]})};export{P as default};
