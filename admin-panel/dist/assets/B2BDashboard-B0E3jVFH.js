import{c as k,u as A,d as P,r as o,a7 as S,j as e,L as D,B as E,ab as I,m as d,U as q,a5 as z}from"./index-DrVHF49k.js";import{C as t}from"./Card-BBVEBcTV.js";import{P as R}from"./phone-call-CNo1SgVr.js";import{B as T}from"./building-2-wlZoUVif.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=k("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),F=()=>{const x=A(),{stats:h,loading:u}=P(s=>s.leads),[a,y]=o.useState({total:0,pending:0,active:0}),[p,m]=o.useState(!1);o.useEffect(()=>{x(S()),(async()=>{try{m(!0);const n=(await z.get("/business-accounts")).data?.data||[],w=n.length,B=n.filter(r=>r.status==="pending").length,L=n.filter(r=>r.status==="active").length;y({total:w,pending:B,active:L})}catch(g){console.error("Error fetching business accounts for B2B dashboard:",g)}finally{m(!1)}})()},[x]);const{totalLeads:l=0,statusCounts:j={},priorityCounts:b={},newLeadsLast7Days:f=0,topProducts:c=[]}=h||{},i=j.closed||0,N=l>0&&i>0?Math.round(i/l*100):0,v=u||p,C=[{key:"urgent",label:"Urgent",dotClass:"bg-red-500",textClass:"text-red-700"},{key:"high",label:"High",dotClass:"bg-orange-500",textClass:"text-orange-700"},{key:"medium",label:"Medium",dotClass:"bg-yellow-400",textClass:"text-yellow-700"},{key:"low",label:"Low",dotClass:"bg-green-500",textClass:"text-green-700"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"B2B Overview"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"High-level snapshot of your B2B leads and business accounts."})]}),v&&e.jsx(D,{}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(t,{title:"Total B2B Leads",value:l,icon:E,color:"lavender"}),e.jsx(t,{title:"New Leads (Last 7 Days)",value:f,icon:R,color:"blue"}),e.jsx(t,{title:"Closed Deals",value:i,icon:U,color:"green"}),e.jsx(t,{title:"Lead Conversion Rate",value:`${N}%`,icon:I,color:"orange"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Business Accounts"}),e.jsx(T,{className:"text-primary",size:22})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Accounts"}),e.jsx("span",{className:"text-base font-semibold text-gray-900",children:a.total})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Pending Approvals"}),e.jsx("span",{className:"text-base font-semibold text-yellow-600",children:a.pending})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Active Accounts"}),e.jsx("span",{className:"text-base font-semibold text-green-600",children:a.active})]})]})]}),e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Lead Priority Breakdown"}),e.jsx(q,{className:"text-primary",size:22})]}),e.jsx("div",{className:"space-y-3",children:C.map(s=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${s.dotClass}`}),e.jsx("span",{className:s.textClass,children:s.label})]}),e.jsx("span",{className:"font-semibold text-gray-800",children:b[s.key]||0})]},s.key))})]}),e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Top Inquired Products"})}),!c||c.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No lead data available yet. Once inquiries start coming in, you'll see the most requested products here."}):e.jsx("ul",{className:"space-y-3",children:c.slice(0,5).map(s=>e.jsx("li",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[s.productImage&&e.jsx("img",{src:s.productImage,alt:s.productName,className:"w-10 h-10 rounded object-cover"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.productName}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.leadCount," lead",s.leadCount===1?"":"s"]})]})]})},s.productName))})]})]})]})};export{F as default};
