import{c as w,a as M,j as e,u as I,r as c,W as S,p as Q,B as P,F as D,P as U,O as F,s as u,X as B,a8 as A,z as y}from"./index-DrVHF49k.js";import{M as T}from"./Modal-DV8JCKQd.js";import{C as E,L as R}from"./LeadStatusBadge-ZQp9yqTZ.js";import{T as _}from"./trending-up-CXLBV2kk.js";import{M as $}from"./mail-DxZXcYW2.js";import{D as O}from"./dollar-sign-B16Mcovo.js";import{C as H}from"./calendar-HRJvHLMu.js";import{P as W}from"./phone-call-CNo1SgVr.js";import{C as G}from"./circle-check-big-wk8a-cBc.js";import{S as X}from"./save-CNUwNws-.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=w("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=w("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=w("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),Y=b=>{const a=M.c(7),{priority:s}=b;let n;a[0]===Symbol.for("react.memo_cache_sentinel")?(n={urgent:{color:"red",bg:"bg-red-100",text:"text-red-700",label:"Urgent",icon:E},high:{color:"orange",bg:"bg-orange-100",text:"text-orange-700",label:"High",icon:_},medium:{color:"yellow",bg:"bg-yellow-100",text:"text-yellow-700",label:"Medium",icon:V},low:{color:"green",bg:"bg-green-100",text:"text-green-700",label:"Low",icon:J}},a[0]=n):n=a[0];const g=n,r=g[s]||g.medium,x=r.icon,m=`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold ${r.bg} ${r.text}`;let i;a[1]!==x?(i=e.jsx(x,{size:14}),a[1]=x,a[2]=i):i=a[2];let l;return a[3]!==r.label||a[4]!==m||a[5]!==i?(l=e.jsxs("span",{className:m,children:[i,r.label]}),a[3]=r.label,a[4]=m,a[5]=i,a[6]=l):l=a[6],l},oe=({isOpen:b,onClose:a,lead:s,onUpdate:n})=>{const g=I(),[r,x]=c.useState(""),[m,i]=c.useState(""),[l,C]=c.useState(""),[N,z]=c.useState(""),[f,k]=c.useState(""),[v,q]=c.useState(""),[o,h]=c.useState(!1);c.useEffect(()=>{s&&(x(s.status||"new"),i(s.priority||"medium"),C(s.quotedPrice||""),z(s.quoteNotes||""),k(s.followUpDate?new Date(s.followUpDate).toISOString().split("T")[0]:""),q(s.internalNotes||""))},[s]);const L=async()=>{try{h(!0);const t={status:r,priority:m};l&&(t.quotedPrice=parseFloat(l)),N&&(t.quoteNotes=N),f&&(t.followUpDate=f),v&&(t.internalNotes=v),await g(A({id:s._id,data:t})).unwrap(),y.success("Lead updated successfully!"),n(),a()}catch(t){y.error(t||"Failed to update lead")}finally{h(!1)}},j=async t=>{try{h(!0);let d={};switch(t){case"contacted":d={status:"contacted",contactedAt:new Date().toISOString()};break;case"interested":d={status:"interested"};break;case"quoted":d={status:"quoted"};break;case"closed":d={status:"closed"};break;case"rejected":d={status:"rejected"};break;default:break}await g(A({id:s._id,data:d})).unwrap(),y.success(`Lead marked as ${t}!`),n(),a()}catch{y.error("Failed to update lead")}finally{h(!1)}};if(!s)return null;const p=t=>t?new Date(t).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";return e.jsxs(T,{isOpen:b,onClose:a,title:`Lead Details - ${s.buyerName}`,size:"xl",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 max-h-[70vh] overflow-y-auto p-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 p-5 rounded-lg border border-gray-200",children:[e.jsxs("h4",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(S,{size:20,className:"text-primary"}),"Buyer Information"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(S,{size:16,className:"text-gray-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Name"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:s.buyerName})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx($,{size:16,className:"text-gray-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Email"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:s.buyerEmail})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Q,{size:16,className:"text-gray-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Phone"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:s.buyerPhone}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("button",{className:"text-xs bg-green-600 text-white px-3 py-1 rounded-lg hover:bg-green-700",children:"Call"}),e.jsx("button",{className:"text-xs bg-blue-600 text-white px-3 py-1 rounded-lg hover:bg-blue-700",children:"WhatsApp"})]})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(K,{size:16,className:"text-gray-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Location"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[s.buyerCity,s.buyerState?`, ${s.buyerState}`:"",", ",s.buyerCountry]})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(P,{size:16,className:"text-gray-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Business Type"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 capitalize",children:s.businessType})]})]}),s.companyName&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(P,{size:16,className:"text-gray-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Company Name"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:s.companyName})]})]}),s.gstNumber&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(D,{size:16,className:"text-gray-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"GST Number"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:s.gstNumber})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-5 rounded-lg border border-gray-200",children:[e.jsxs("h4",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(U,{size:20,className:"text-primary"}),"Product Information"]}),e.jsxs("div",{className:"space-y-3",children:[s.productId?.image&&e.jsx("img",{src:s.productId.image,alt:s.productName,className:"w-full h-40 object-cover rounded-lg"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Product Name"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:s.productName})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Quantity"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[s.quantityRequired," units"]})]}),s.size&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Size"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:s.size})]})]}),s.color&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Color Preference"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:s.color})]}),s.productId?.moq&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Product MOQ"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[s.productId.moq," units"]})]})]})]}),(s.notes||s.requirements)&&e.jsxs("div",{className:"bg-gray-50 p-5 rounded-lg border border-gray-200",children:[e.jsxs("h4",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(F,{size:20,className:"text-primary"}),"Inquiry Details"]}),s.requirements&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Requirements"}),e.jsx("p",{className:"text-sm text-gray-800 mt-1",children:s.requirements})]}),s.notes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Additional Notes"}),e.jsx("p",{className:"text-sm text-gray-800 mt-1",children:s.notes})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 p-5 rounded-lg border border-gray-200",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-4",children:"Lead Status & Priority"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:r,onChange:t=>x(t.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"contacted",children:"Contacted"}),e.jsx("option",{value:"interested",children:"Interested"}),e.jsx("option",{value:"quoted",children:"Quoted"}),e.jsx("option",{value:"negotiating",children:"Negotiating"}),e.jsx("option",{value:"closed",children:"Closed"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"lost",children:"Lost"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),e.jsxs("select",{value:m,onChange:t=>i(t.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Current Status"}),e.jsx(R,{status:s.status})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Current Priority"}),e.jsx(Y,{priority:s.priority})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-5 rounded-lg border border-gray-200",children:[e.jsxs("h4",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(O,{size:20,className:"text-primary"}),"Quote Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quoted Price (â‚¹)"}),e.jsx("input",{type:"number",value:l,onChange:t=>C(t.target.value),placeholder:"Enter quoted price",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quote Notes"}),e.jsx("textarea",{value:N,onChange:t=>z(t.target.value),placeholder:"Add notes about the quote...",rows:"3",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),s.quotedAt&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Quoted On"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:p(s.quotedAt)})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-5 rounded-lg border border-gray-200",children:[e.jsxs("h4",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(H,{size:20,className:"text-primary"}),"Follow-up"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Follow-up Date"}),e.jsx("input",{type:"date",value:f,onChange:t=>k(t.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Internal Notes"}),e.jsx("textarea",{value:v,onChange:t=>q(t.target.value),placeholder:"Add internal notes (not visible to buyer)...",rows:"3",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-5 rounded-lg border border-gray-200",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-4",children:"Timeline"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Created:"}),e.jsx("span",{className:"font-semibold",children:p(s.createdAt)})]}),s.contactedAt&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"First Contacted:"}),e.jsx("span",{className:"font-semibold",children:p(s.contactedAt)})]}),s.lastContactedAt&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Last Contacted:"}),e.jsx("span",{className:"font-semibold",children:p(s.lastContactedAt)})]}),s.quotedAt&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Quoted:"}),e.jsx("span",{className:"font-semibold",children:p(s.quotedAt)})]})]})]})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 rounded-b-lg",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsxs(u,{variant:"success",size:"small",onClick:()=>j("contacted"),disabled:o||s.status==="contacted",children:[e.jsx(W,{size:16}),"Mark as Contacted"]}),e.jsxs(u,{variant:"primary",size:"small",onClick:()=>j("quoted"),disabled:o,children:[e.jsx(D,{size:16}),"Mark as Quoted"]}),e.jsxs(u,{variant:"success",size:"small",onClick:()=>j("closed"),disabled:o,children:[e.jsx(G,{size:16}),"Close Deal"]}),e.jsxs(u,{variant:"danger",size:"small",onClick:()=>j("rejected"),disabled:o,children:[e.jsx(B,{size:16}),"Reject"]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(u,{variant:"outline",onClick:a,disabled:o,children:"Cancel"}),e.jsxs(u,{variant:"primary",onClick:L,disabled:o,children:[e.jsx(X,{size:18}),o?"Updating...":"Update Lead"]})]})]})]})};export{oe as L,Y as a};
