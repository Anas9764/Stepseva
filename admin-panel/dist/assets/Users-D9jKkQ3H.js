import{c as X,a as Y,u as Z,d as ee,r as V,j as t,Q as te,T as se,z as B,V as le,L as re,s as F,W as ne}from"./index-DpfGS3Ht.js";import{T as ae}from"./Table-FvLzyYkS.js";import{S as ie}from"./SearchInput-CP9JsF7u.js";import{P as oe}from"./Pagination-DItAE_xV.js";import{T as ce}from"./trash-2-Cjm8fSoJ.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=X("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),we=()=>{const e=Y.c(58),n=Z(),{users:l,loading:W}=ee(de),[a,q]=V.useState(""),[b,G]=V.useState(1);let N,S;e[0]!==n?(N=()=>{n(te())},S=[n],e[0]=n,e[1]=N,e[2]=S):(N=e[1],S=e[2]),V.useEffect(N,S);let I;e:{if(a){let s;if(e[3]!==a||e[4]!==l){let i;e[6]!==a?(i=j=>j.name?.toLowerCase().includes(a.toLowerCase())||j.email?.toLowerCase().includes(a.toLowerCase()),e[6]=a,e[7]=i):i=e[7],s=l.filter(i),e[3]=a,e[4]=l,e[5]=s}else s=e[5];I=s;break e}I=l}const r=I,M=Math.ceil(r.length/10),_=(b-1)*10,k=_+10;let w;e[8]!==k||e[9]!==r||e[10]!==_?(w=r.slice(_,k),e[8]=k,e[9]=r,e[10]=_,e[11]=w):w=e[11];const D=w;let v;e[12]===Symbol.for("react.memo_cache_sentinel")?(v=s=>{G(s)},e[12]=v):v=e[12];const H=v;let C;e[13]!==n?(C=async(s,i)=>{const j=i==="admin"?"user":"admin",K=`Are you sure you want to change this user's role to ${j}?`;window.confirm(K)&&(await n(se({id:s,role:j}))).type==="users/updateRole/fulfilled"&&B.success("User role updated successfully")},e[13]=n,e[14]=C):C=e[14];const E=C;let U;e[15]!==n?(U=async s=>{window.confirm("Are you sure you want to delete this user?")&&(await n(le(s))).type==="users/delete/fulfilled"&&B.success("User deleted successfully")},e[15]=n,e[16]=U):U=e[16];const Q=U;let R;e[17]===Symbol.for("react.memo_cache_sentinel")?(R=[{header:"User",accessor:"name",render:me},{header:"Role",accessor:"role",render:he},{header:"Registration Date",accessor:"createdAt",render:ue},{header:"Total Orders",accessor:"orderCount",render:fe},{header:"Total Spent",accessor:"totalSpent",render:ge}],e[17]=R):R=e[17];const J=R;if(W&&!l.length){let s;return e[18]===Symbol.for("react.memo_cache_sentinel")?(s=t.jsx(re,{fullScreen:!0}),e[18]=s):s=e[18],s}let z;e[19]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Users Management"}),e[19]=z):z=e[19];const $=r.length===1?"user":"users";let o;e[20]!==r.length||e[21]!==$?(o=t.jsxs("div",{children:[z,t.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage registered users • ",r.length," ",$," found"]})]}),e[20]=r.length,e[21]=$,e[22]=o):o=e[22];let c;e[23]!==a?(c=t.jsx("div",{className:"w-full sm:w-96",children:t.jsx(ie,{value:a,onChange:q,placeholder:"Search by name or email..."})}),e[23]=a,e[24]=c):c=e[24];let L;e[25]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsx("p",{className:"text-sm text-gray-500 font-medium mb-1",children:"Total Users"}),e[25]=L):L=e[25];let d;e[26]!==l.length?(d=t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[L,t.jsx("h3",{className:"text-3xl font-bold text-gray-800",children:l.length})]}),e[26]=l.length,e[27]=d):d=e[27];let P;e[28]===Symbol.for("react.memo_cache_sentinel")?(P=t.jsx("p",{className:"text-sm text-gray-500 font-medium mb-1",children:"Admin Users"}),e[28]=P):P=e[28];let m;e[29]!==l?(m=l.filter(xe),e[29]=l,e[30]=m):m=e[30];let h;e[31]!==m.length?(h=t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[P,t.jsx("h3",{className:"text-3xl font-bold text-gray-800",children:m.length})]}),e[31]=m.length,e[32]=h):h=e[32];let A;e[33]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsx("p",{className:"text-sm text-gray-500 font-medium mb-1",children:"Regular Users"}),e[33]=A):A=e[33];let u;e[34]!==l?(u=l.filter(pe),e[34]=l,e[35]=u):u=e[35];let f;e[36]!==u.length?(f=t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[A,t.jsx("h3",{className:"text-3xl font-bold text-gray-800",children:u.length})]}),e[36]=u.length,e[37]=f):f=e[37];let g;e[38]!==d||e[39]!==h||e[40]!==f?(g=t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d,h,f]}),e[38]=d,e[39]=h,e[40]=f,e[41]=g):g=e[41];let x;e[42]!==Q||e[43]!==E?(x=s=>t.jsxs(t.Fragment,{children:[t.jsx(F,{size:"sm",variant:s.role==="admin"?"secondary":"outline",onClick:()=>E(s._id,s.role),icon:t.jsx(O,{size:16}),children:s.role==="admin"?"Remove Admin":"Make Admin"}),t.jsx(F,{size:"sm",variant:"danger",onClick:()=>Q(s._id),icon:t.jsx(ce,{size:16}),children:"Delete"})]}),e[42]=Q,e[43]=E,e[44]=x):x=e[44];let p;e[45]!==D||e[46]!==x?(p=t.jsx(ae,{columns:J,data:D,actions:x,emptyMessage:"No users found"}),e[45]=D,e[46]=x,e[47]=p):p=e[47];let y;e[48]!==b||e[49]!==r.length||e[50]!==M?(y=r.length>0&&t.jsx(oe,{currentPage:b,totalPages:M,onPageChange:H,itemsPerPage:10,totalItems:r.length,showInfo:!0,align:"right"}),e[48]=b,e[49]=r.length,e[50]=M,e[51]=y):y=e[51];let T;return e[52]!==o||e[53]!==c||e[54]!==g||e[55]!==p||e[56]!==y?(T=t.jsxs("div",{className:"space-y-6",children:[o,c,g,p,y]}),e[52]=o,e[53]=c,e[54]=g,e[55]=p,e[56]=y,e[57]=T):T=e[57],T};function de(e){return e.users}function me(e){return t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-pink-light to-lavender-500 rounded-full flex items-center justify-center",children:t.jsx(ne,{size:20,className:"text-white"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:e.name}),t.jsx("p",{className:"text-xs text-gray-500",children:e.email})]})]})}function he(e){return t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${e.role==="admin"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:e.role==="admin"?t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(O,{size:12}),"Admin"]}):"User"})}function ue(e){return new Date(e.createdAt).toLocaleDateString()}function fe(e){return e.orderCount||0}function ge(e){return t.jsx("div",{children:t.jsxs("p",{className:"font-semibold text-gray-800",children:["₹",e.totalSpent?.toLocaleString("en-IN")||"0"]})})}function xe(e){return e.role==="admin"}function pe(e){return e.role!=="admin"}export{we as default};
