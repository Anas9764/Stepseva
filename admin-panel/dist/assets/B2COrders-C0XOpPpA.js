import{a as ee,u as te,d as se,r as f,j as t,I as re,s as ae,L as le}from"./index-DpfGS3Ht.js";import{T as ne}from"./Table-FvLzyYkS.js";import{S as ie}from"./SearchInput-CP9JsF7u.js";import{P as de}from"./Pagination-DItAE_xV.js";import{M as ce}from"./Modal-9Na5SDL_.js";import{E as oe}from"./eye-B8aLYjqH.js";const Ce=()=>{const e=ee.c(55),d=te(),{orders:G,loading:V}=se(me),[a,q]=f.useState(""),[n,H]=f.useState("All"),[l,J]=f.useState(null),[y,U]=f.useState(!1),[i,K]=f.useState(1);let j,N;e[0]!==d?(j=()=>{d(re())},N=[d],e[0]=d,e[1]=j,e[2]=N):(j=e[1],N=e[2]),f.useEffect(j,N);let s,b,c;if(e[3]!==i||e[4]!==G||e[5]!==a||e[6]!==n){const r=G.filter(xe);let Q;e[10]!==a||e[11]!==n?(Q=F=>{const Y=F._id?.toLowerCase().includes(a.toLowerCase())||F.user?.name?.toLowerCase().includes(a.toLowerCase())||F.user?.email?.toLowerCase().includes(a.toLowerCase()),Z=n==="All"||F.status===n;return Y&&Z},e[10]=a,e[11]=n,e[12]=Q):Q=e[12],s=r.filter(Q),c=Math.ceil(s.length/10),b=s.slice((i-1)*10,i*10),e[3]=i,e[4]=G,e[5]=a,e[6]=n,e[7]=s,e[8]=b,e[9]=c}else s=e[7],b=e[8],c=e[9];const R=b;let k;e[13]===Symbol.for("react.memo_cache_sentinel")?(k=r=>{J(r),U(!0)},e[13]=k):k=e[13];const W=k;let v,S,w,C,O,_;e[14]===Symbol.for("react.memo_cache_sentinel")?(v={header:"Order ID",accessor:"_id",render:ue},S={header:"Customer",accessor:"user",render:he},w={header:"Items",accessor:"items",render:ge},C={header:"Total",accessor:"totalAmount",render:pe},O={header:"Status",accessor:"status",render:fe},_={header:"Date",accessor:"createdAt",render:ye},e[14]=v,e[15]=S,e[16]=w,e[17]=C,e[18]=O,e[19]=_):(v=e[14],S=e[15],w=e[16],C=e[17],O=e[18],_=e[19]);let I;e[20]===Symbol.for("react.memo_cache_sentinel")?(I=[v,S,w,C,O,_,{header:"Actions",accessor:"actions",render:r=>t.jsx(ae,{size:"sm",variant:"outline",onClick:()=>W(r),icon:t.jsx(oe,{size:16}),children:"View"})}],e[20]=I):I=e[20];const X=I;if(V){let r;return e[21]===Symbol.for("react.memo_cache_sentinel")?(r=t.jsx(le,{fullScreen:!0}),e[21]=r):r=e[21],r}let A;e[22]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"B2C Orders"}),e[22]=A):A=e[22];let o;e[23]!==s.length?(o=t.jsxs("div",{children:[A,t.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:["Manage retail orders from individual customers • ",s.length," orders found"]})]}),e[23]=s.length,e[24]=o):o=e[24];let m;e[25]!==a?(m=t.jsx("div",{className:"flex-1",children:t.jsx(ie,{value:a,onChange:q,placeholder:"Search by order ID, customer name, or email..."})}),e[25]=a,e[26]=m):m=e[26];let D;e[27]===Symbol.for("react.memo_cache_sentinel")?(D=r=>H(r.target.value),e[27]=D):D=e[27];let L,P,E,M,B,T,$;e[28]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsx("option",{value:"All",children:"All Status"}),P=t.jsx("option",{value:"Pending",children:"Pending"}),E=t.jsx("option",{value:"Processing",children:"Processing"}),M=t.jsx("option",{value:"Shipped",children:"Shipped"}),B=t.jsx("option",{value:"Delivered",children:"Delivered"}),T=t.jsx("option",{value:"Completed",children:"Completed"}),$=t.jsx("option",{value:"Cancelled",children:"Cancelled"}),e[28]=L,e[29]=P,e[30]=E,e[31]=M,e[32]=B,e[33]=T,e[34]=$):(L=e[28],P=e[29],E=e[30],M=e[31],B=e[32],T=e[33],$=e[34]);let x;e[35]!==n?(x=t.jsx("div",{className:"sm:w-48",children:t.jsxs("select",{value:n,onChange:D,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[L,P,E,M,B,T,$]})}),e[35]=n,e[36]=x):x=e[36];let u;e[37]!==m||e[38]!==x?(u=t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 sm:p-6 border border-gray-200 dark:border-gray-700",children:t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[m,x]})}),e[37]=m,e[38]=x,e[39]=u):u=e[39];let h;e[40]!==R?(h=t.jsx(ne,{columns:X,data:R,emptyMessage:"No B2C orders found"}),e[40]=R,e[41]=h):h=e[41];let g;e[42]!==i||e[43]!==s.length||e[44]!==c?(g=s.length>0&&t.jsx(de,{currentPage:i,totalPages:c,onPageChange:K,itemsPerPage:10,totalItems:s.length,showInfo:!0,align:"right"}),e[42]=i,e[43]=s.length,e[44]=c,e[45]=g):g=e[45];let p;e[46]!==y||e[47]!==l?(p=y&&l&&t.jsx(ce,{isOpen:y,onClose:()=>U(!1),title:"Order Details",size:"lg",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white mb-2",children:"Order Information"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Order ID"}),t.jsxs("p",{className:"font-medium text-gray-800 dark:text-white",children:["#",l._id?.slice(-6).toUpperCase()]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Status"}),t.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:l.status})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Total Amount"}),t.jsxs("p",{className:"font-medium text-gray-800 dark:text-white",children:["₹",l.totalAmount?.toLocaleString("en-IN")]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Date"}),t.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:new Date(l.createdAt).toLocaleString("en-IN")})]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white mb-2",children:"Customer Information"}),t.jsxs("div",{className:"text-sm",children:[t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Name"}),t.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:l.user?.name||"Guest"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Email"}),t.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:l.user?.email||"N/A"})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white mb-2",children:"Order Items"}),t.jsx("div",{className:"space-y-2",children:l.items?.map(je)})]})]})}),e[46]=y,e[47]=l,e[48]=p):p=e[48];let z;return e[49]!==o||e[50]!==u||e[51]!==h||e[52]!==g||e[53]!==p?(z=t.jsxs("div",{className:"space-y-6 w-full",children:[o,u,h,g,p]}),e[49]=o,e[50]=u,e[51]=h,e[52]=g,e[53]=p,e[54]=z):z=e[54],z};function me(e){return e.orders}function xe(e){return!e.isB2BOrder}function ue(e){return`#${e._id?.slice(-6).toUpperCase()}`}function he(e){return t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-gray-800 dark:text-white",children:e.user?.name||"Guest"}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.user?.email||""})]})}function ge(e){return t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm text-gray-800 dark:text-white",children:[e.items?.length||0," items"]}),e.items?.[0]&&t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.items[0].product?.name||"N/A"})]})}function pe(e){return`₹${e.totalAmount?.toLocaleString("en-IN")||"0.00"}`}function fe(e){return t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${e.status==="Completed"?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300":e.status==="Shipped"?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300":e.status==="Delivered"?"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300":"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300"}`,children:e.status})}function ye(e){return new Date(e.createdAt).toLocaleDateString("en-IN")}function je(e,d){return t.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:e.product?.name||e.name}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Qty: ",e.quantity]})]}),t.jsxs("p",{className:"font-medium text-gray-800 dark:text-white",children:["₹",e.price?.toLocaleString("en-IN")]})]},d)}export{Ce as default};
