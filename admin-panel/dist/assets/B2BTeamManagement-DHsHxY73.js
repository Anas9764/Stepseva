import{c as u,r,j as e,m as n,U as i,B as f,L as N,ae as b,ac as v}from"./index-DrVHF49k.js";import{T as L}from"./Table-CPTOpXxD.js";import{P as w}from"./phone-call-CNo1SgVr.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=u("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),M=()=>{const[c,m]=r.useState([]),[d,x]=r.useState([]),[h,o]=r.useState(!1);r.useEffect(()=>{(async()=>{try{o(!0);const[a,t]=await Promise.all([b.getAllUsers(),v.getAllLeads({limit:1e3})]),p=(a?.data||a?.users||[]).filter(j=>j.role==="admin");m(p);const y=t?.data||t;x(y?.leads||[])}catch(a){console.error("Error loading team management data:",a)}finally{o(!1)}})()},[]);const l=r.useMemo(()=>{const s={};return d.forEach(a=>{const t=a.assignedTo?._id||a.assignedTo;t&&(s[t]||(s[t]={totalLeads:0,openLeads:0,closedDeals:0,contacted:0}),s[t].totalLeads+=1,["closed"].includes(a.status)?s[t].closedDeals+=1:["rejected","lost"].includes(a.status)||(s[t].openLeads+=1),["contacted","interested","quoted","negotiating","closed"].includes(a.status)&&(s[t].contacted+=1))}),s},[d]),g=[{header:"Team Member",render:s=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(i,{size:20,className:"text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:s.name}),e.jsx("p",{className:"text-xs text-gray-600",children:s.email})]})]})},{header:"Leads",render:s=>{const a=l[s._id]||{totalLeads:0};return e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:a.totalLeads}),e.jsx("p",{className:"text-xs text-gray-500",children:"Total assigned"})]})}},{header:"Open / Closed",render:s=>{const a=l[s._id]||{openLeads:0,closedDeals:0};return e.jsxs("div",{className:"text-xs text-gray-700 space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-amber-600",children:a.openLeads})," ","open"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-green-600",children:a.closedDeals})," ","closed"]})]})}},{header:"Contacted",render:s=>{const a=l[s._id]||{totalLeads:0,contacted:0},t=a.totalLeads>0?Math.round(a.contacted/a.totalLeads*100):0;return e.jsxs("div",{className:"text-xs text-gray-700 space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-blue-600",children:a.contacted})," ","leads"]}),e.jsxs("p",{className:"text-gray-500",children:[t,"% contacted"]})]})}}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"B2B Team Management"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"See how your admin team is performing with assigned B2B leads."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Team Members"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:c.length})]}),e.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:e.jsx(i,{className:"text-primary",size:22})})]})}),e.jsx(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Assigned Leads"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:d.filter(s=>s.assignedTo).length})]}),e.jsx("div",{className:"p-3 bg-amber-100 rounded-lg",children:e.jsx(f,{className:"text-amber-600",size:22})})]})}),e.jsx(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Closed Deals"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:d.filter(s=>s.status==="closed").length})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(T,{className:"text-green-600",size:22})})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:h?e.jsx(N,{}):c.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(i,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("p",{className:"text-gray-600",children:"No admin users found. Use the Users page to promote team members to admin."})]}):e.jsx(L,{columns:g,data:c,actions:s=>{const a=l[s._id]||{openLeads:0};return e.jsx("div",{className:"text-xs text-gray-600 space-y-1 text-right",children:e.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-blue-50 text-blue-700",children:[e.jsx(w,{size:12}),e.jsxs("span",{children:[a.openLeads," lead",a.openLeads===1?"":"s"," to contact"]})]})})},emptyMessage:"No team members found"})})]})};export{M as default};
